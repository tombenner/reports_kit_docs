.container
  .row
    .col-md-2
      %h3= @category
      %br
      %ul.nav.nav-pills.nav-stacked
        - @examples.each do |example|
          %li{ role: 'presentation', class: example.key == @key ? 'active' : nil }
            = link_to example.name, category_example_path(example.category, example)

    .col-md-10
      .row
        .col-md-12
          %h3= @example
          .row
            .col-md-12
              = render_report @example.config do |f|
                - if @example.view
                  = Haml::Engine.new(@example.view).render(self, { f: f })
                  %br
                  %br
          .row
            .col-md-7
              %h4 Config
              %p
                %code
                  = @yaml_path
              %pre
                = preserve do
                  = @example.config.to_yaml.gsub(/^---/, '')
              - keys = %w(type datasets options)
              - existing_keys = keys.select { |key| @example.config.to_yaml.include?(" #{key}:") }
              - if existing_keys.present?
                %p
                  %small
                    %em Note: The #{existing_keys.map { |key| %|"chart.#{key}"| }.to_sentence } #{'option'.pluralize(existing_keys.length)} #{ existing_keys.length > 1 ? 'are' : 'is' } are passed to #{ link_to 'Chart.js', 'http://www.chartjs.org/docs/' }, so any values supported by Chart.js are supported here, too.
              %br
              %h4 View
              %p
                %code
                  = "app/views/my_controller/my_view.html.haml"
              %pre
                = preserve do
                  - if @example.view
                    = "= render_report '#{@example.file}' do |f|\n  " + @example.view.gsub("\n", "\n  ")
                  - else
                    = "= render_report '#{@example.file}'"
            .col-md-5
              %h4 Model
              - model_path = "app/models/#{@measure.key}.rb"
              - model_content = File.read(Rails.root.join(model_path))
              %p
                %code
                  = model_path
              %pre
                = model_content

          %br
